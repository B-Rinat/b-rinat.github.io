<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wedding Invitation</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Roboto", sans-serif;
        background-color: #fffaf0; /* Ivory */
        color: #333;
      }
      h1,
      h2,
      h3,
      .brand-font {
        font-family: "Playfair Display", serif;
      }
      .hero {
        background: url("bg-1.jpg") no-repeat center center;
        background-size: cover;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        background-attachment: fixed;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      }
      .section {
        padding: 30px 0;
      }
      .bg-light-pink {
        background-color: #fffaf0 !important; /* Ivory */
      }
      .lang-selector {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 1000;
      }
      .form-control,
      .form-control:focus {
        background-color: #fffaf0; /* Ivory */
        border: 1px solid #e5dcc5;
        color: #333;
        box-shadow: none;
      }
      .form-control:focus {
        border-color: #e5dcc5;
        outline: none;
      }
      .form-select {
        border-radius: 0;
        background-color: #fffaf0; /* Ivory */
        border: 1px solid #e5dcc5;
      }
      .btn-custom {
        background-color: #e5dcc5; /* Light ivory/gold */
        border-color: #e5dcc5;
        color: #333;
        border-radius: 0;
        padding: 10px 30px;
        font-weight: 500;
        transition: background 0.2s, border 0.2s, color 0.2s;
      }
      .btn-custom:hover {
        background-color: #f5e9d7; /* Slightly lighter ivory */
        border-color: #f5e9d7;
        color: #1a2b1a;
      }
      .container-box {
        background: rgba(255, 255, 255, 0.85); /* Soft white for contrast */
        border-radius: 0.7em;
        padding: 2em 1.5em;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07);
        margin-bottom: 0;
      }
    </style>
  </head>
  <body>
    <div
      class="lang-selector"
      style="
        background: rgba(255, 250, 240, 0.7);
        border-radius: 0.5em;
        padding: 0.3em 0.7em;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      "
    >
      <select
        id="lang-switcher"
        class="form-select form-select-sm"
        style="
          background: transparent;
          border: none;
          box-shadow: none;
          color: #333;
          font-weight: 500;
        "
      >
        <option value="en">English</option>
        <option value="ru">Русский</option>
        <option value="ky">Кыргызча</option>
      </select>
    </div>

    <header class="hero text-center">
      <div>
        <h1
          class="display-3"
          style="
            color: #1a2b1a;
            background: rgba(255, 255, 255, 0.55);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 0.5em 1em;
            border-radius: 0.5em;
            display: inline-block;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          "
        >
          Rinat & Aziza
        </h1>
        <br />
        <p
          class="lead brand-font"
          data-i18n="getting_married_title"
          style="
            color: #1a2b1a;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 0.3em 1em;
            border-radius: 0.5em;
            display: inline-block;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          "
        >
          We're Getting Married!
        </p>
      </div>
    </header>

    <main>
      <section class="section text-center">
        <div class="container">
          <div class="container-box">
            <h2 data-i18n="you_are_invited">You are invited!</h2>
            <p
              class="lead"
              id="guest-name-display"
              style="font-size: 1.5rem"
            ></p>
          </div>
        </div>
      </section>

      <section class="section bg-light-pink">
        <div class="container">
          <div class="container-box">
            <div class="row text-center g-4">
              <div class="col-md-12">
                <h2 class="mb-4" data-i18n="details_title">Wedding Details</h2>
              </div>
              <div class="col-md-4">
                <h3 data-i18n="when_title">When</h3>
                <p data-i18n="when_date">Saturday, 11 October 2025</p>
                <p data-i18n="when_time">at 4:00 PM</p>
              </div>
              <div class="col-md-4">
                <h3 data-i18n="where_title">Where</h3>
                <p data-i18n="where_venue">"Someplace"</p>
                <p data-i18n="where_address">Tokmok, Kyrgyzstan</p>
                <div class="d-grid gap-2 mt-3">
                  <a
                    href="https://go.2gis.com/W7WpM"
                    target="_blank"
                    class="btn btn-custom"
                  >
                    Open in 2GIS
                  </a>
                </div>
              </div>
              <div class="col-md-4">
                <h3 data-i18n="info_title">Other Info</h3>
                <p>
                  <b data-i18n="info_dress_code_label"></b>
                  <span data-i18n="info_dress_code"></span>
                </p>
                <p>
                  <b data-i18n="info_parking_label"></b>
                  <span data-i18n="info_parking"></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-6">
              <div class="text-center mb-4">
                <h2 data-i18n="rsvp_title">RSVP</h2>
                <p data-i18n="rsvp_subtitle">
                  Please respond by August 15, 2025
                </p>
              </div>
              <form id="rsvp-form">
                <div class="mb-3">
                  <label for="name" class="form-label" data-i18n="form_name"
                    >Name</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    data-i18n-placeholder="form_name_placeholder"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="email" class="form-label" data-i18n="form_email"
                    >Email (Optional)</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    data-i18n-placeholder="form_email_placeholder"
                  />
                </div>
                <div class="mb-3">
                  <label
                    for="guests"
                    class="form-label"
                    data-i18n="form_guests_count"
                    >Number of Guests</label
                  >
                  <select class="form-select" id="guests">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                  </select>
                </div>
                <div id="additional-guests-container" class="mb-3"></div>
                <div class="d-grid">
                  <button
                    type="submit"
                    class="btn btn-custom"
                    data-i18n="form_button"
                  >
                    Reserve My Spot
                  </button>
                </div>
              </form>
              <div
                id="rsvp-success"
                class="alert alert-success mt-4"
                style="display: none"
                role="alert"
              ></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="text-center py-4 bg-light-pink">
      <p class="brand-font fs-4 mb-0">Made with Love ❤️</p>
      <p class="brand-font fs-4 mb-0">Rinat & Aziza</p>
      <p class="mb-0">11.10.2025</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAwf3YPv_eBRnZcaqqyJZ9sAvvtnejeZd0",
        authDomain: "wedding2025-19886.firebaseapp.com",
        projectId: "wedding2025-19886",
        storageBucket: "wedding2025-19886.firebasestorage.app",
        messagingSenderId: "934739791771",
        appId: "1:934739791771:web:8b84a0fc4d9f5ebe44db3e",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      import {
        getFirestore,
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

      const db = getFirestore(app);

      // Expose db to window for use in RSVP form submission
      window.db = db;
      window.addDoc = addDoc;
      window.collection = collection;
    </script>
    <script>
      $(document).ready(function () {
        // --- I18N (Internationalization) & CONTENT ---
        const translations = {
          en: {
            getting_married_title: "We're Getting Married!",
            you_are_invited: "You are invited!",
            details_title: "Wedding Details",
            when_title: "When",
            when_date: "Saturday, 11 October 2025",
            when_time: "at 4:00 PM",
            where_title: "Where",
            where_venue: '"Supara" Ethno-Complex',
            where_address: "Bishkek, Kyrgyzstan",
            info_title: "Other Info",
            info_dress_code_label: "Dress Code:",
            info_dress_code: "Formal Attire",
            info_parking_label: "Parking:",
            info_parking: "Available on site",
            rsvp_title: "RSVP",
            rsvp_subtitle: "Please respond by August 15, 2025",
            form_name: "Your Full Name",
            form_name_placeholder: "e.g., John Doe",
            form_email: "Email (Optional)",
            form_email_placeholder: "e.g., john.doe@example.com",
            form_guests_count: "Number of Guests (including yourself)",
            form_guest_name_placeholder: "Guest Full Name",
            form_button: "Reserve My Spot",
            rsvp_success_message:
              "Thank you! Your reservation has been received.",
          },
          ru: {
            getting_married_title: "Мы женимся!",
            you_are_invited: "Приглашаем Вас!",
            details_title: "Детали свадьбы",
            when_title: "Когда",
            when_date: "Суббота, 11 октября 2025 г.",
            when_time: "в 16:00",
            where_title: "Где",
            where_venue: 'Этно-комплекс "Супара"',
            where_address: "г. Бишкек, Кыргызстан",
            info_title: "Другая информация",
            info_dress_code_label: "Дресс-код:",
            info_dress_code: "Вечерний",
            info_parking_label: "Парковка:",
            info_parking: "Доступна на месте",
            rsvp_title: "Подтверждение",
            rsvp_subtitle: "Пожалуйста, ответьте до 15 августа 2025 г.",
            form_name: "Ваше полное имя",
            form_name_placeholder: "напр., Иван Иванов",
            form_email: "Email (необязательно)",
            form_email_placeholder: "напр., ivan.ivanov@example.com",
            form_guests_count: "Количество гостей (включая вас)",
            form_guest_name_placeholder: "Полное имя гостя",
            form_button: "Зарезервировать место",
            rsvp_success_message: "Спасибо! Ваше бронирование получено.",
          },
          ky: {
            getting_married_title: "Биз үйлөнүп жатабыз!",
            you_are_invited: "Сизди чакырабыз!",
            details_title: "Той тууралуу",
            when_title: "Качан",
            when_date: "Ишемби, 11-октябрь 2025 ж.",
            when_time: "саат 16:00",
            where_title: "Кайда",
            where_venue: '"Супара" этно-комплекси',
            where_address: "Бишкек ш., Кыргызстан",
            info_title: "Башка маалымат",
            info_dress_code_label: "Дресс-код:",
            info_dress_code: "Майрамдык",
            info_parking_label: "Унаа токтотуучу жай:",
            info_parking: "Комплексте бар",
            rsvp_title: "Жооп берүү",
            rsvp_subtitle: "Сураныч, 15-август 2025 ж. чейин жооп бериңиз",
            form_name: "Сиздин толук аты-жөнүңүз",
            form_name_placeholder: "м-ы, Асанов Үсөн",
            form_email: "Email (милдеттүү эмес)",
            form_email_placeholder: "м-ы, uson.asanov@example.com",
            form_guests_count: "Коноктордун саны (өзүңүздү кошкондо)",
            form_guest_name_placeholder: "Коноктун толук аты-жөнү",
            form_button: "Орун ээлөө",
            rsvp_success_message: "Рахмат! Сиздин катышууңуз кабыл алынды.",
          },
        };

        function getQueryParam(param) {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get(param);
        }

        function changeLanguage(lang) {
          if (!translations[lang]) lang = "en"; // Default to English

          // Update all text elements
          $("[data-i18n]").each(function () {
            const key = $(this).data("i18n");
            $(this).html(translations[lang][key]);
          });

          // Update all placeholder attributes
          $("[data-i18n-placeholder]").each(function () {
            const key = $(this).data("i18n-placeholder");
            $(this).attr("placeholder", translations[lang][key]);
          });

          // Update RSVP success message
          $("#rsvp-success").html(translations[lang].rsvp_success_message);

          // Set dropdown to current language
          $("#lang-switcher").val(lang);

          // Update URL without reloading page
          const url = new URL(window.location);
          url.searchParams.set("lang", lang);
          window.history.pushState({}, "", url);
        }

        // --- DYNAMIC CONTENT ---

        // Personalize guest name from URL
        const guestName = getQueryParam("guest");
        if (guestName) {
          $("#guest-name-display").text(decodeURIComponent(guestName));
        }

        // --- DYNAMIC RSVP FORM ---
        $("#guests").on("change", function () {
          const count = parseInt($(this).val());
          const container = $("#additional-guests-container");
          container.empty(); // Clear previous fields

          if (count > 1) {
            for (let i = 1; i < count; i++) {
              const currentLang = $("#lang-switcher").val();
              const placeholder =
                translations[currentLang].form_guest_name_placeholder +
                ` ${i + 1}`;
              container.append(
                `<div class="mb-3">
                                <input type="text" class="form-control additional-guest-name" placeholder="${placeholder}" required>
                             </div>`
              );
            }
          }
        });

        // Handle RSVP form submission
        $("#rsvp-form").on("submit", function (e) {
          e.preventDefault(); // Prevent actual form submission

          const guestNames = $(".additional-guest-name")
            .map(function () {
              return $(this).val();
            })
            .get();

          const rsvpData = {
            name: $("#name").val(),
            email: $("#email").val(),
            guestCount: parseInt($("#guests").val()),
            additionalGuests: guestNames,
            timestamp: new Date().toISOString(),
          };

          // --- FIRESTORE INTEGRATION POINT ---
          // Here you would add your code to send `rsvpData` to Firestore.
          // Example: db.collection("rsvps").add(rsvpData)
          // For now, we'll just log it to the console and show a success message.
          console.log("RSVP Data for Firestore:", rsvpData);
          window
            .addDoc(window.collection(window.db, "rsvps"), rsvpData)
            .then(() => {
              $("#rsvp-success").slideDown();
              $("#rsvp-form").slideUp();
            })
            .catch((error) => {
              alert("Error saving RSVP: " + error.message);
            });
        });

        // --- INITIALIZATION ---
        const initialLang = getQueryParam("lang") || "en";

        changeLanguage(initialLang);

        $("#lang-switcher").on("change", function () {
          changeLanguage($(this).val());
          // Also trigger change on guests dropdown to update placeholders
          $("#guests").trigger("change");
        });
      });
    </script>
  </body>
</html>
